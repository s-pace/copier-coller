#!/bin/bash

# Array of keys
KEYS=("61873127cec34d353198d290" "02e14529f9df9a8ebbe03533" "05a9c6f479d1b415bef22001" "0ab3a948e570661e1aadde9b" "0f35a42d01972060a4a73a99" "1498b8d331a4507f6840634a" "1aebf6577c7f3c61905583ab" "1c55eafbfae05864bedf5606" "1d0c1207c8807e434c55eecf" "2272dfa00d58a59dae26a399" "2645ff5366560a74570477f3" "29e2c74edd90589dfef8ca5d" "2b5ae5ead270ec817f1648a6" "345d3ab90247a43938714569" "3a9d1351cfd15aac05a6dc6a" "3c8eff73dbf3868069a62bb6" "3fdcfbb6b08fdada0b3eead9" "40b2aaeaf3feb6c62abb93d7" "45d25eb5a731dc9fc3594eb7" "504bf4e2873d18ac2da7842c" "56c9ef311be26a11969f4b79" "5a951788db04252fd8ad5def" "615223e2eda280db839e4ac4" "61522697eda280bc2e9e4ac6" "615226ceeda280854f9e4ac7" "61522763eda280c2479e4aca" "61522db5eda280f0f79e4ace" "615491c64878fa2c56f04b72" "6155c8954878fa5c7df04b86" "615727199d8a177a7d431389" "61575ca49d8a1777fa431395" "615875919d8a17d00f4313a2" "615968e99d8a17347b4313b0" "6159698e9d8a17e8ad4313b2" "61596a149d8a17e8b64313b4" "61596ab19d8a173e3c4313b6" "61596b1f9d8a17a2304313b8" "61596bd29d8a1736e14313ba" "61596ecd9d8a17014e4313bc" "61596f6e9d8a177e2b4313be" "615970469d8a17154f4313c0" "6159710d9d8a1732254313c2" "615971ef9d8a17cc274313c4" "615973959d8a17770e4313c6" "6159740f9d8a174dda4313c8" "615975069d8a1764604313ca" "615975c19d8a1726db4313cc" "615976309d8a17003c4313ce" "615aa1f69d8a1713ff4313f3" "615adcf99d8a178b25431402" "615db5d19d8a174076431444" "6162b9fb9d8a1790474314b8" "616423a79d8a1792cc4314c8" "616aaa479d8a17040f43150f" "616aacc39d8a172ea4431512" "617108c69d8a17a73c4315a6" "6177c70b9d8a17c21d431684" "617989bd9d8a17824f4316e0" "61798b3f9d8a17b9334316e8" "61798f0b9d8a17df2c4316ef" "617c63a49d8a17fe8a431713" "617c69b79d8a17e02f431717" "617c77829d8a173ca143171a" "617c78669d8a1788c143171d" "617c87719d8a17f1ae431722" "617c8a679d8a177171431728" "617c8b749d8a17230943172a" "617e46e79d8a17e206431762" "617f0b0c9d8a17d65743176f" "617f0ba09d8a174697431771" "617f0c819d8a178f6c431774" "617f2dc69d8a17032a431777" "617f36d19d8a172fcf43177b" "61803f169d8a17241d431787" "61803f8f9d8a17395a431789" "61803ff39d8a17435143178b" "618043199d8a1777bf43178d" "618043a39d8a17a22843178f" "618043f09d8a17eba7431790" "6180443b9d8a170ccf431792" "6180445d9d8a170d86431793" "618044ee9d8a1772eb431794" "618046869d8a177a82431796" "618047c49d8a1768cc431799" "6184215d9d8a175ee14317c8" "618506e39d8a17821f4317cd" "61850a949d8a17186b4317d1" "61851ae19d8a17e83f4317e7" "6185289d9d8a172a644317f3" "618529739d8a17400a4317f5" "61852b169d8a173b8b4317f9" "61852c259d8a1762934317ff" "61852f899d8a1798e4431805" "618532349d8a1761fa43180d" "618534e29d8a17855d431810" "618536059d8a175908431812" "618539e79d8a172f59431814" "61856fe69d8a17977a431822" "618571c59d8a17fe1c431825" "6185724d9d8a173573431828" "618573249d8a171dda43182c" "618573d59d8a176b2c431830" "6185bd969d8a1788b5431833" "6185bf3b9d8a17917f431835" "6185bfd19d8a17e12f431837" "6185c0739d8a1765a743183a" "6185c1d19d8a17277b43183c" "618724abcec34dc2c498d270" "618726a1cec34d5d8998d274" "6187271bcec34d951d98d276" "618727cbcec34d3a9a98d278" "61872854cec34d3fae98d27a" "618728d2cec34dc6a098d27c" "61872941cec34da15498d27e" "61872d99cec34d0fae98d280" "61872e04cec34d311198d282" "61872e6bcec34df1fb98d284" "61872ed5cec34d16e498d286" "61872fb6cec34d808798d289" "61873127cec34d353198d29")
S3_BUCKET="printjam-stls"

for KEY in "${KEYS[@]}"; do
    # URL of the file to download
    FILE_URL="https://storage.googleapis.com/ucloud-v3/$KEY.stl"

    # Local path to save the file
    LOCAL_FILE_PATH="./models/$KEY.stl"

    # S3 file path
    S3_FILE_PATH="$KEY.stl"

    # Download the file
    echo "Downloading $FILE_URL"
    curl -o "$LOCAL_FILE_PATH" "$FILE_URL"

    # Check if download was successful
    if [ $? -ne 0 ]; then
        echo "Failed to download the file."
        continue
    fi

    # Upload the file to S3
    echo "Uploading $LOCAL_FILE_PATH to s3://$S3_BUCKET/$S3_FILE_PATH"
    aws s3 cp "$LOCAL_FILE_PATH" "s3://$S3_BUCKET/$S3_FILE_PATH"

    # Check if upload was successful
    if [ $? -ne 0 ]; then
        echo "Failed to upload the file to S3."
        continue
    fi

    echo "File $KEY successfully downloaded and uploaded to S3."
done
